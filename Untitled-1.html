<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PER√çCIA INTERDIMENSIONAL</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    
    <style>
        /* Estilos Base e Efeito CRT (Scanlines) */
        body { 
            background: #020502; 
            color: #32ff7e; 
            font-family: 'VT323', monospace; 
            font-size: 22px; /* Fonte maior por ser retro */
            margin: 0; 
            display: flex; 
            flex-direction: column;
            height: 100vh;
            padding: 15px;
            box-sizing: border-box;
            position: relative;
        }

        /* Efeito visual de monitor de tubo */
        body::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
            z-index: 2;
            background-size: 100% 4px;
            pointer-events: none; /* Permite clicar atrav√©s das linhas */
        }
        
        #terminal {
            border: 1px solid #32ff7e;
            padding: 20px;
            flex-grow: 1;
            overflow-y: auto;
            background: rgba(0, 15, 0, 0.85);
            box-shadow: inset 0 0 20px rgba(50, 255, 126, 0.3), 0 0 10px rgba(50, 255, 126, 0.2);
            border-radius: 5px;
            scroll-behavior: smooth;
            text-shadow: 0 0 3px currentColor; /* Efeito Glow */
            position: relative;
            z-index: 1;
        }

        /* Customizando a barra de rolagem */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #050a05; border-left: 1px solid #113311; }
        ::-webkit-scrollbar-thumb { background: #32ff7e; border-radius: 4px; box-shadow: 0 0 5px #32ff7e; }

        .input-area {
            margin-top: 15px;
            display: none; 
            border-top: 1px dashed #32ff7e;
            padding-top: 15px;
        }

        input {
            background: transparent;
            border: none;
            color: #f1c40f; 
            font-family: 'VT323', monospace;
            font-size: 22px;
            outline: none;
            flex-grow: 1;
            text-transform: uppercase;
            width: 80%;
            text-shadow: 0 0 5px currentColor;
            caret-color: #f1c40f; /* Cursor piscante amarelo */
        }

        /* Indicador de N√≠vel */
        #progress-bar {
            position: sticky;
            top: 0;
            background: #020502;
            padding: 5px;
            border-bottom: 1px dashed #32ff7e;
            text-align: right;
            font-weight: bold;
            display: none;
            z-index: 10;
        }

        /* Cores dos Personagens com Brilho */
        .system { color: #32ff7e; }
        .hufflepuff { color: #f1c40f; font-weight: bold; text-shadow: 0 0 8px rgba(241, 196, 15, 0.6); } 
        .rick { color: #00d2d3; text-shadow: 0 0 5px rgba(0, 210, 211, 0.5); }
        .morty { color: #ffeb3b; }
        .snape { color: #a5b1c2; }
        .error { color: #ff4d4d; text-shadow: 0 0 5px rgba(255, 77, 77, 0.5); }
        .success { color: #2ecc71; font-weight: bold; text-shadow: 0 0 5px rgba(46, 204, 113, 0.5); }
        
        .hidden { display: none; }
        
        #final-screen {
            text-align: center;
            animation: fadeIn 3s ease-in;
            margin-top: 20px;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        img { 
            max-width: 100%; 
            border-radius: 5px; 
            margin-top: 15px;
            border: 2px solid #f1c40f; 
            box-shadow: 0 0 15px rgba(241, 196, 15, 0.5);
            position: relative;
            z-index: 10;
        }
        
        /* Glitch Effect para a tela inicial */
        .glitch { animation: glitch 0.2s linear infinite; }
        @keyframes glitch {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }
    </style>
</head>
<body>

<div id="terminal">
    <div id="progress-bar">[ STATUS: INICIANDO... ]</div>
    <div id="output"></div>

    <div class="input-area" id="input-container">
        <span>> RESPOSTA: </span>
        <input type="text" id="user-input" autocomplete="off" spellcheck="false" autofocus>
    </div>

    <div id="final-screen" class="hidden">
        <h2 class="hufflepuff">‚ö° CASO RESOLVIDO! ‚ö°</h2>
        <p>Feliz Anivers√°rio amor! amo muito voc√™, espero que tenha se divertido jogando, meu nene.</p>
        <p>Eu demorei um pouquinho para fazer, ent√£o espero que jogue sempre que puder humpf(ou menos 50 pontos para a Lufa-Lufa!).</p>
        <p style="font-size: 1.5rem; color: #ff4757; text-shadow: 0 0 10px #ff4757; font-weight: bold; margin-top: 20px;">Feliz Anivers√°rio, meu amor!</p>
        <img src="mozinho.gif" alt="Rick and Morty Love">
        <p style="margin-top: 20px; font-size: 1.1rem; color: #a5b1c2;">Assinado: A programadora mais gostosa e grifin√≥ria ‚ù§Ô∏èüíõ</p>
    </div>
</div>

<script>
    const output = document.getElementById('output');
    const inputContainer = document.getElementById('input-container');
    const input = document.getElementById('user-input');
    const final = document.getElementById('final-screen');
    const terminal = document.getElementById('terminal');
    const progressBar = document.getElementById('progress-bar');

    const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

    let currentLevel = 0;
    let isTyping = false;

    // BANCO DE DADOS DE PERGUNTAS E HIST√ìRIA
    const levels = [
        {
            dialogue: [
                "<span class='system'>> LOCALIZA√á√ÉO: Masmorras de Po√ß√µes, Hogwarts.</span>",
                "<span class='rick'>RICK: \"Morty! *burp* Eu falei pra n√£o mexer no painel, seu idiota! Ca√≠mos num... num por√£o g√≥tico cheio de crian√ßas de capa e frascos in√∫teis. E olha isso, tem uma po√ßa de sangue aqui e minha arma de portais pifou!\"</span>",
                "<span class='snape'>SNAPE: \"Dumbledore deve estar louco se acha que vou tolerar... *trouxas* e seus artefatos no meu laborat√≥rio. Menos 50 pontos para seja l√° qual for a Casa pat√©tica de voc√™s.\"</span>",
                "<span class='snape'>SNAPE: \"Se querem sair daqui vivos e achar quem sabotou esse... brinquedo, vamos precisar de uma mente anal√≠tica. E infelizmente, a melhor Perita Criminal de Hogwarts √© da Lufa-Lufa.\"</span>",
                "<br>",
                "<span class='system'>> N√çVEL 1: QU√çMICA FORENSE</span>",
                "<span class='snape'>SNAPE: \"Vamos testar o b√°sico, antes que eu perca a paci√™ncia. Qual subst√¢ncia quimioluminescente reage com o ferro da hemoglobina para detectar sangue oculto?\"</span>"
            ],
            answers: ['luminol'],
            hint: "<span class='error'>> SNAPE: Francamente... At√© o Neville Longbottom saberia essa. Brilha em azul e come√ßa com L. Tente de novo.</span>"
        },
        {
            dialogue: [
                "<span class='success'>> ACESSO LIBERADO. PISTA ENCONTRADA.</span>",
                "<span class='morty'>MORTY: \"A-ah cara, uau! E-ela √© boa mesmo, Rick! Mas olha, t√° muito escuro aqui, eu... eu n√£o t√¥ gostando disso, tem uns barulhos estranhos vindo daquelas gaiolas!\"</span>",
                "<br>",
                "<span class='system'>> N√çVEL 2: HARRY POTTER</span>",
                "<span class='system'>SISTEMA: Qual feiti√ßo a Perita deve conjurar para iluminar a ponta da varinha e acalmar o Morty?</span>"
            ],
            answers: ['lumos', 'lumus'],
            hint: "<span class='error'>> MORTY: A-aw geez! Socorro, t√° muito escuro! P-pensa na palavra 'luminoso', por favor!</span>"
        },
        {
            dialogue: [
                "<span class='success'>> VARINHA ACESA. VISIBILIDADE 100%.</span>",
                "<span class='rick'>RICK: \"T√°, t√°, grande coisa, ela acendeu uma luzinha. Magia √© s√≥ ci√™ncia que voc√™s t√™m pregui√ßa de explicar! *burp* Achei uma garrafa com uma impress√£o digital latente.\"</span>",
                "<span class='rick'>RICK: \"Vou aquecer uma supercola aqui pra revelar isso. Qual o componente principal, espertinha?\"</span>",
                "<br>",
                "<span class='system'>> N√çVEL 3: QU√çMICA / PER√çCIA</span>",
                "<span class='system'>SISTEMA: Qual √© o nome do principal componente qu√≠mico da supercola, usado na papiloscopia para revelar digitais?</span>"
            ],
            answers: ['cianoacrilato', 'cyanoacrilato'],
            hint: "<span class='error'>> RICK: S√©rio? Voc√™ quer ser perita ou vai fazer po√ß√£o do amor? Come√ßa com 'Ciano' e termina com 'acrilato'. Pensa um pouco!</span>"
        },
        {
            dialogue: [
                "<span class='success'>> IMPRESS√ÉO DIGITAL REVELADA COM SUCESSO.</span>",
                "<span class='morty'>MORTY: \"E-eca, Rick! A digital... parece de um... um legume mutante com verrugas! I-isso me lembra daquela vez que voc√™ fez de tudo pra fugir da terapia em fam√≠lia...\"</span>",
                "<br>",
                "<span class='system'>> N√çVEL 4: RICK & MORTY</span>",
                "<span class='morty'>MORTY: \"E-em qual vegetal o Rick se transformou naquele dia?\"</span>"
            ],
            answers: ['picles', 'pickle', 'pepino'],
            hint: "<span class='error'>> MORTY: A-aw geez, eu tenho pesadelos com isso at√© hoje! Ele ficava gritando 'I'm ______ Rick!'. Ajuda a√≠!</span>"
        },
        {
            dialogue: [
                "<span class='success'>> DADO CONFIRMADO.</span>",
                "<span class='snape'>SNAPE: \"...Fascinante. A digital pertence a um aluno da sua pr√≥pria Casa. A quest√£o √©: a sua famosa 'lealdade' vai impedi-la de investigar os seus?\"</span>",
                "<br>",
                "<span class='system'>> N√çVEL 5: HARRY POTTER</span>",
                "<span class='snape'>SNAPE: \"Qual √© mesmo a fera subestimada que representa a Lufa-Lufa? Aquela que parece d√≥cil, mas √© letal quando provocada?\"</span>"
            ],
            answers: ['texugo'],
            hint: "<span class='error'>> SNAPE: Que decep√ß√£o para a fundadora Helga. N√£o √© um le√£o exibido nem uma √°guia pedante. √â um mam√≠fero listrado que cava t√∫neis!</span>"
        },
        {
            dialogue: [
                "<span class='success'>> ANIMAL CONFIRMADO. LEALDADE APROVADA.</span>",
                "<span class='rick'>RICK: \"Dane-se o bicho listrado! *burp* A po√ß√£o desse idiota t√° bloqueando o sinal do meu portal. Eu preciso separar essa gororoba m√°gica nos compostos originais!\"</span>",
                "<br>",
                "<span class='system'>> N√çVEL 6: QU√çMICA</span>",
                "<span class='system'>SISTEMA: Qual √© o m√©todo laboratorial f√≠sico-qu√≠mico usado para separar os componentes de uma mistura complexa?</span>"
            ],
            answers: ['cromatografia'],
            hint: "<span class='error'>> RICK: Voc√™ t√° de brincadeira comigo?! Pensa no papel filtro com canetinha, mas em n√≠vel universit√°rio! Come√ßa com 'Cromato'!</span>"
        },
        {
            dialogue: [
                "<span class='success'>> COMPONENTES SEPARADOS. TOXINA IDENTIFICADA.</span>",
                "<span class='snape'>SNAPE: \"Seu linguajar √© deplor√°vel, velho tolo. Essa 'gororoba' √© uma toxina refinad√≠ssima. Tr√™s gotas e at√© o Lorde das Trevas revelaria seus segredos mais √≠ntimos.\"</span>",
                "<br>",
                "<span class='system'>> N√çVEL 7: HARRY POTTER</span>",
                "<span class='snape'>SNAPE: \"Como se chama essa po√ß√£o, que atua como o mais puro 'soro da verdade'?\"</span>"
            ],
            answers: ['veritaserum'],
            hint: "<span class='error'>> SNAPE: Sua mente est√° divagando... A po√ß√£o do soro da verdade come√ßa com 'Veritas'. N√£o me fa√ßa tirar mais pontos.</span>"
        },
        {
            dialogue: [
                "<span class='success'>> ANT√çDOTO SINTETIZADO.</span>",
                "<span class='morty'>MORTY: \"A-aw, geez, Rick! O ant√≠doto funcionou, mas... e-eca! Tem um cad√°ver de um bicho ali no canto! T√°... t√° cheio de larvas e moscas voando! E-eu acho que vou vomitar...\"</span>",
                "<br>",
                "<span class='system'>> N√çVEL 8: PER√çCIA CRIMINAL</span>",
                "<span class='system'>SISTEMA: Como se chama a √°rea da per√≠cia que estuda insetos encontrados em cad√°veres para estimar o tempo de morte (IPM)?</span>"
            ],
            answers: ['entomologia', 'entomologia forense'],
            hint: "<span class='error'>> MORTY: R√°pido, por favor! √â o estudo dos insetos na per√≠cia... 'Entomo' alguma coisa... A-antes que as larvas venham pra c√°!</span>"
        },
        {
            dialogue: [
                "<span class='success'>> TEMPO DE MORTE ESTIMADO. SUSPEITO DESCARTADO.</span>",
                "<span class='rick'>RICK: \"√ìtimo. O bicho morreu h√° tr√™s dias. Muito √∫til, Sherlock! *burp* Chega de brincar de detetive de varinha e suco de fada. Calibrei a arma.\"</span>",
                "<span class='rick'>RICK: \"S√≥ preciso que voc√™ digite a assinatura da minha dimens√£o original pra gente vazar daqui. Anda logo!\"</span>",
                "<br>",
                "<span class='system'>> N√çVEL 9: RICK & MORTY</span>",
                "<span class='rick'>RICK: \"Qual √© o c√≥digo da minha dimens√£o original? (Letra e tr√™s n√∫meros)\"</span>"
            ],
            answers: ['c-137', 'c137', 'c 137'],
            hint: "<span class='error'>> RICK: N√£o me faz perder tempo! Eu sou o Rick mais Rick do multiverso! Letra C, tra√ßo, e cento e trinta e... digita logo!</span>"
        },
        {
            dialogue: [
                "<span class='success'>> PORTAL ABERTO. ESCAPE EMINENTE.</span>",
                "<span class='system'>> [ALERTA] RICK E MORTY EVACUADOS COM SUCESSO.</span>",
                "<span class='system'>> [SISTEMA] INTERRUP√á√ÉO DE N√öCLEO ROM√ÇNTICO DETECTADA.</span>",
                "<br>",
                "<span class='system'>> √öLTIMO N√çVEL: QU√çMICA DO AMOR</span>",
                "<span class='system'>SISTEMA: O caos interdimensional passou, mas a melhor rea√ß√£o qu√≠mica ficou. Para criar a liga√ß√£o mais forte e est√°vel do universo, dois √°tomos decidem **compartilhar** seus el√©trons. Como se chama essa liga√ß√£o?</span>"
            ],
            answers: ['covalente', 'liga√ß√£o covalente'],
            hint: "<span class='error'>> DICA DA SUA NAMORADA GRIFIN√ìRIA: 'Co' (compartilhar) + 'Valente' (el√©trons de val√™ncia). √â o que n√≥s temos! Tenta de novo.</span>"
        }
    ];

    // Tela de Boot Inicial
    async function bootSequence() {
        const bootText = [
            "Bypassing mainframe security...",
            "Decrypting Hufflepuff database...",
            "Intercepting interdimensional portal signature...",
            "Establishing connection with Central Command...",
            "<span class='success'>ACCESS GRANTED</span>"
        ];
        
        for (let text of bootText) {
            output.innerHTML += `<p class='system'>${text}</p>`;
            await sleep(800);
        }
        
        output.innerHTML = ""; // Limpa a tela ap√≥s o boot
        progressBar.style.display = 'block'; // Mostra a barra de progresso
        updateProgress();
        printText(levels[currentLevel].dialogue);
    }

    function updateProgress() {
        progressBar.innerHTML = `[ STATUS: N√çVEL ${currentLevel + 1} / ${levels.length} ]`;
    }

    async function printText(textArray) {
        isTyping = true;
        inputContainer.style.display = 'none';
        
        for (let text of textArray) {
            output.innerHTML += `<p>${text}</p>`;
            terminal.scrollTop = terminal.scrollHeight;
            
            let delay = text.includes('<br>') ? 0 : (text.includes('RICK') || text.includes('SNAPE') || text.includes('MORTY')) ? 2000 : 1000;
            await sleep(delay);
        }
        
        inputContainer.style.display = 'flex';
        input.focus();
        terminal.scrollTop = terminal.scrollHeight;
        isTyping = false;
    }

    window.onload = () => {
        bootSequence();
    };

    input.addEventListener('keypress', async function (e) {
        if (e.key === 'Enter' && !isTyping) {
            const resposta = input.value.toLowerCase().trim();
            if(resposta === '') return;
            
            input.value = ''; 
            inputContainer.style.display = 'none'; 
            
            output.innerHTML += `<p class='hufflepuff'>> VOC√ä DIGITOU: ${resposta.toUpperCase()}</p>`;
            terminal.scrollTop = terminal.scrollHeight;

            await sleep(800);

            let acertou = levels[currentLevel].answers.some(ans => resposta.includes(ans));

            if (acertou) {
                currentLevel++;
                if (currentLevel < levels.length) {
                    if(currentLevel % 3 === 0) {
                        output.innerHTML = "<p class='system' class='glitch'>> [LIMPANDO CACHE DE MEM√ìRIA...]</p><br>";
                        await sleep(1000);
                    }
                    updateProgress();
                    printText(levels[currentLevel].dialogue);
                } else {
                    progressBar.style.display = 'none';
                    output.innerHTML += `<p class='success'>> COMPARTILHAMENTO DE EL√âTRONS CONFIRMADO. LIGA√á√ÉO ESTABELECIDA COM SUCESSO.</p>`;
                    await sleep(2000);
                    output.innerHTML = ''; 
                    final.classList.remove('hidden'); 
                }
            } else {
                output.innerHTML += `<p>${levels[currentLevel].hint}</p>`;
                terminal.scrollTop = terminal.scrollHeight;
                
                await sleep(1500);
                inputContainer.style.display = 'flex';
                input.focus();
                terminal.scrollTop = terminal.scrollHeight;
            }
        }
    });
</script>

</body>
</html>